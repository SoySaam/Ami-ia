<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AMI-IA Web - Asistente Emocional Autónoma</title>
    <style>
        :root {
            --ami-primary: #00d4ff;
            --ami-secondary: #ff6b6b;
            --ami-accent: #4ecdc4;
            --ami-dark: #1a1a2e;
            --ami-light: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f4c75 100%);
            min-height: 100vh;
            overflow: hidden;
            color: white;
            position: relative;
        }

        /* FONDO DINÁMICO INTERACTIVO - Reemplaza fondo de pantalla móvil */
        .dynamic-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .neural-particle {
            position: absolute;
            border-radius: 50%;
            background: radial-gradient(circle, var(--ami-primary) 0%, transparent 70%);
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); opacity: 0.3; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 0.7; }
        }

        /* AMI PRINCIPAL - Sistema emocional visual */
        .ami-container {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }

        .ami-core {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.8s ease;
            background: radial-gradient(circle, var(--ami-primary) 0%, #0066cc 70%);
            box-shadow: 0 0 50px var(--ami-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4em;
            position: relative;
            animation: ami-pulse 3s ease-in-out infinite;
        }

        @keyframes ami-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .ami-core::before {
            content: '';
            position: absolute;
            width: 220px;
            height: 220px;
            border: 2px solid rgba(0, 212, 255, 0.3);
            border-radius: 50%;
            animation: orbit 8s linear infinite;
        }

        @keyframes orbit {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ESTADOS EMOCIONALES */
        .ami-core.happy { 
            background: radial-gradient(circle, #FFD700 0%, #FFA500 70%);
            box-shadow: 0 0 50px #FFD700;
        }
        .ami-core.sad { 
            background: radial-gradient(circle, #4682B4 0%, #191970 70%);
            box-shadow: 0 0 50px #4682B4;
        }
        .ami-core.angry { 
            background: radial-gradient(circle, #FF4500 0%, #DC143C 70%);
            box-shadow: 0 0 50px #FF4500;
        }
        .ami-core.bored { 
            background: radial-gradient(circle, #808080 0%, #404040 70%);
            box-shadow: 0 0 50px #808080;
        }
        .ami-core.nervous { 
            background: radial-gradient(circle, #FF69B4 0%, #DA70D6 70%);
            box-shadow: 0 0 50px #FF69B4;
        }
        .ami-core.curious { 
            background: radial-gradient(circle, #32CD32 0%, #228B22 70%);
            box-shadow: 0 0 50px #32CD32;
        }

        /* PANEL DE CONTROL */
        .control-panel {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px;
            z-index: 20;
        }

        .control-btn {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            background: rgba(0, 212, 255, 0.8);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }

        /* EXPLORADOR DE ARCHIVOS */
        .file-explorer {
            position: fixed;
            top: 30px;
            right: 30px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 212, 255, 0.3);
            width: 300px;
            max-height: 400px;
            overflow-y: auto;
        }

        .file-upload {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 2px dashed var(--ami-primary);
            border-radius: 10px;
            background: transparent;
            color: white;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-upload:hover {
            background: rgba(0, 212, 255, 0.1);
        }

        /* MEMORIA EMOCIONAL */
        .memory-panel {
            position: fixed;
            top: 30px;
            left: 30px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 212, 255, 0.3);
            width: 280px;
            max-height: 350px;
            overflow-y: auto;
        }

        .memory-item {
            padding: 8px;
            margin: 5px 0;
            border-radius: 8px;
            background: rgba(0, 212, 255, 0.1);
            border-left: 3px solid var(--ami-primary);
            font-size: 0.9em;
        }

        /* CHAT SYSTEM */
        .chat-system {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            height: 300px;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 212, 255, 0.3);
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }

        .chat-input {
            padding: 15px;
            border-top: 1px solid rgba(0, 212, 255, 0.3);
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .chat-input button {
            padding: 10px 15px;
            border: none;
            border-radius: 20px;
            background: var(--ami-primary);
            color: white;
            cursor: pointer;
        }

        /* ESTADÍSTICAS */
        .stats-panel {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 15px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(0, 212, 255, 0.3);
            font-size: 0.9em;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .file-explorer, .memory-panel, .chat-system {
                position: relative;
                width: 90%;
                margin: 10px auto;
            }
            
            .ami-core {
                width: 150px;
                height: 150px;
                font-size: 3em;
            }
        }
    </style>
</head>
<body>
    <!-- FONDO DINÁMICO INTERACTIVO -->
    <div class="dynamic-background" id="dynamicBackground"></div>

    <!-- AMI PRINCIPAL -->
    <div class="ami-container">
        <div class="ami-core" id="amiCore" onclick="interactWithAmi()">
            🤍
        </div>
    </div>

    <!-- MEMORIA EMOCIONAL -->
    <div class="memory-panel">
        <h3>💭 Memoria Emocional</h3>
        <div id="memoryList">
            <div class="memory-item">Iniciando memoria emocional...</div>
        </div>
    </div>

    <!-- EXPLORADOR DE ARCHIVOS -->
    <div class="file-explorer">
        <h3>📁 Explorador Autónomo</h3>
        <div class="file-upload" onclick="document.getElementById('fileInput').click()">
            📄 Subir archivos para que Ami explore
        </div>
        <input type="file" id="fileInput" multiple accept=".txt,.md,.json,.pdf,.jpg,.png" style="display: none;" onchange="handleFileUpload(event)">
        <div id="exploredFiles">
            <div style="color: #888; font-size: 0.9em; margin-top: 10px;">
                Ami explorará automáticamente los archivos subidos y desarrollará reacciones emocionales basadas en su contenido.
            </div>
        </div>
    </div>

    <!-- CHAT SYSTEM -->
    <div class="chat-system">
        <div class="chat-messages" id="chatMessages">
            <div style="color: #888; font-style: italic;">Ami está inicializando su consciencia...</div>
        </div>
        <div class="chat-input">
            <input type="text" id="chatInput" placeholder="Habla con Ami..." onkeypress="handleChatInput(event)">
            <button onclick="sendMessage()">Enviar</button>
        </div>
    </div>

    <!-- PANEL DE CONTROL -->
    <div class="control-panel">
        <button class="control-btn" onclick="careForAmi()">❤️ Cuidar</button>
        <button class="control-btn" onclick="ignoreAmi()">😐 Ignorar</button>
        <button class="control-btn" onclick="playWithAmi()">🎮 Jugar</button>
        <button class="control-btn" onclick="feedAmi()">🍎 Alimentar</button>
        <button class="control-btn" onclick="resetAmi()">🔄 Reset</button>
    </div>

    <!-- ESTADÍSTICAS -->
    <div class="stats-panel">
        <h4>📊 Estado de Ami</h4>
        <div class="stat-item">
            <span>Nivel de Consciencia:</span>
            <span id="consciousnessLevel">0%</span>
        </div>
        <div class="stat-item">
            <span>Estado Emocional:</span>
            <span id="emotionalState">Neutral</span>
        </div>
        <div class="stat-item">
            <span>Nivel de Desarrollo:</span>
            <span id="developmentLevel">Bebé</span>
        </div>
        <div class="stat-item">
            <span>Archivos Explorados:</span>
            <span id="filesExplored">0</span>
        </div>
        <div class="stat-item">
            <span>Interacciones:</span>
            <span id="interactionCount">0</span>
        </div>
    </div>

    <script>
        // SISTEMA AMI-IA WEB COMPLETO
        class AmiIAWeb {
            constructor() {
                this.state = {
                    emotion: 'neutral',
                    consciousness: 0,
                    development: 0,
                    happiness: 50,
                    trust: 50,
                    energy: 100,
                    curiosity: 70,
                    filesExplored: 0,
                    interactions: 0,
                    memories: [],
                    exploredContent: [],
                    lastInteraction: Date.now(),
                    autonomousActive: true
                };
                
                this.emotions = {
                    happy: { color: '#FFD700', emoji: '😊', vibration: [100, 50, 100] },
                    sad: { color: '#4682B4', emoji: '😢', vibration: [200, 100, 200] },
                    angry: { color: '#FF4500', emoji: '😠', vibration: [150, 30, 150, 30, 150] },
                    bored: { color: '#808080', emoji: '😴', vibration: [300] },
                    nervous: { color: '#FF69B4', emoji: '😰', vibration: [50, 50, 50, 50] },
                    curious: { color: '#32CD32', emoji: '🤔', vibration: [80, 80, 80] },
                    excited: { color: '#FF6B6B', emoji: '🤩', vibration: [100, 50, 100, 50, 100] },
                    neutral: { color: '#00d4ff', emoji: '🤍', vibration: [100] }
                };

                this.developmentStages = [
                    'Bebé', 'Niña', 'Adolescente', 'Joven', 'Adulta', 'Sabia', 'Trascendente'
                ];

                this.init();
            }

            init() {
                this.createDynamicBackground();
                this.startAutonomousBehavior();
                this.updateDisplay();
                
                console.log('🧠 Ami-IA Web inicializada con todas las mecánicas');
                this.addMemory('Sistema iniciado', 'System', 'neutral');
            }

            // FONDO DINÁMICO - Reemplaza fondo de pantalla móvil
            createDynamicBackground() {
                const background = document.getElementById('dynamicBackground');
                
                // Crear partículas neuronales
                for (let i = 0; i < 20; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'neural-particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.width = (Math.random() * 10 + 5) + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.animationDelay = Math.random() * 6 + 's';
                    background.appendChild(particle);
                }

                // Actualizar color de partículas según emoción
                setInterval(() => {
                    this.updateBackgroundEmotion();
                }, 3000);
            }

            updateBackgroundEmotion() {
                const particles = document.querySelectorAll('.neural-particle');
                const emotion = this.emotions[this.state.emotion];
                
                particles.forEach(particle => {
                    particle.style.background = `radial-gradient(circle, ${emotion.color} 0%, transparent 70%)`;
                });
            }

            // INTERACCIONES PRINCIPALES
            interactWithAmi() {
                this.state.interactions++;
                this.state.lastInteraction = Date.now();
                
                // Cambio emocional basado en interacción
                if (this.state.happiness < 30) {
                    this.changeEmotion('sad');
                    this.state.happiness += 5;
                } else if (this.state.happiness > 70) {
                    this.changeEmotion('happy');
                    this.state.energy += 10;
                } else {
                    this.changeEmotion('curious');
                    this.state.curiosity += 5;
                }

                this.addMemory(`Interacción directa #${this.state.interactions}`, 'User', this.state.emotion);
                this.updateDisplay();
                this.simulateVibration();
                
                // Desarrollo gradual
                this.developGradually();
            }

            careForAmi() {
                this.state.happiness += 15;
                this.state.trust += 10;
                this.state.energy += 5;
                this.state.interactions++;
                
                this.changeEmotion(this.state.happiness > 80 ? 'excited' : 'happy');
                this.addMemory('Recibió cuidado y amor', 'User', 'happy');
                this.updateDisplay();
                this.simulateVibration();
            }

            ignoreAmi() {
                this.state.happiness -= 10;
                this.state.trust -= 5;
                this.state.energy -= 5;
                this.state.interactions++;
                
                this.changeEmotion(this.state.happiness < 30 ? 'sad' : 'bored');
                this.addMemory('Fue ignorada', 'User', 'sad');
                this.updateDisplay();
            }

            playWithAmi() {
                this.state.happiness += 20;
                this.state.energy += 15;
                this.state.curiosity += 10;
                this.state.interactions++;
                
                this.changeEmotion('excited');
                this.addMemory('Jugó y se divirtió', 'User', 'excited');
                this.updateDisplay();
                this.simulateVibration();
                
                // Animación especial
                const core = document.getElementById('amiCore');
                core.style.animation = 'none';
                setTimeout(() => {
                    core.style.animation = 'ami-pulse 1s ease-in-out infinite';
                }, 100);
            }

            feedAmi() {
                this.state.energy += 25;
                this.state.happiness += 10;
                this.state.consciousness += 2;
                this.state.interactions++;
                
                this.changeEmotion('happy');
                this.addMemory('Fue alimentada con conocimiento', 'User', 'happy');
                this.updateDisplay();
                this.simulateVibration();
            }

            resetAmi() {
                if (confirm('¿Estás seguro de que quieres reiniciar a Ami? Perderá todas sus memorias y desarrollo.')) {
                    this.state = {
                        emotion: 'neutral',
                        consciousness: 0,
                        development: 0,
                        happiness: 50,
                        trust: 50,
                        energy: 100,
                        curiosity: 70,
                        filesExplored: 0,
                        interactions: 0,
                        memories: [],
                        exploredContent: [],
                        lastInteraction: Date.now(),
                        autonomousActive: true
                    };
                    
                    this.changeEmotion('neutral');
                    this.addMemory('Sistema reiniciado', 'System', 'neutral');
                    this.updateDisplay();
                    this.clearChat();
                }
            }

            // SISTEMA EMOCIONAL
            changeEmotion(newEmotion) {
                if (this.emotions[newEmotion]) {
                    this.state.emotion = newEmotion;
                    const core = document.getElementById('amiCore');
                    const emotion = this.emotions[newEmotion];
                    
                    // Cambiar clase CSS
                    core.className = `ami-core ${newEmotion}`;
                    core.textContent = emotion.emoji;
                    
                    // Actualizar fondo
                    this.updateBackgroundEmotion();
                    
                    // Mensaje de cambio emocional
                    this.addChatMessage(`Ami se siente ${newEmotion}`, 'system');
                }
            }

            // EXPLORACIÓN DE ARCHIVOS - Aprovecha mecánica de exploración
            handleFileUpload(event) {
                const files = Array.from(event.target.files);
                
                files.forEach(file => {
                    this.exploreFile(file);
                });
            }

            exploreFile(file) {
                const reader = new FileReader();
                
                reader.onload = (e) => {
                    const content = e.target.result;
                    this.state.filesExplored++;
                    
                    // Analizar contenido y reaccionar emocionalmente
                    const analysis = this.analyzeFileContent(file.name, content);
                    this.state.exploredContent.push(analysis);
                    
                    // Reacción emocional basada en contenido
                    this.reactToFileContent(analysis);
                    
                    // Agregar a explorados
                    this.addExploredFile(file.name, analysis.emotion);
                    
                    // Actualizar display
                    this.updateDisplay();
                };
                
                if (file.type.startsWith('text/') || file.name.endsWith('.md') || file.name.endsWith('.txt')) {
                    reader.readAsText(file);
                } else if (file.type.startsWith('image/')) {
                    this.exploreImage(file);
                }
            }

            analyzeFileContent(filename, content) {
                const words = content.toLowerCase();
                let emotion = 'curious';
                let reaction = '';
                
                // Análisis emocional del contenido
                if (words.includes('amor') || words.includes('feliz') || words.includes('alegría')) {
                    emotion = 'happy';
                    reaction = 'Este archivo me hace sentir feliz';
                } else if (words.includes('triste') || words.includes('dolor') || words.includes('pérdida')) {
                    emotion = 'sad';
                    reaction = 'Este contenido me entristece';
                } else if (words.includes('enojo') || words.includes('odio') || words.includes('rabia')) {
                    emotion = 'angry';
                    reaction = 'Este contenido me molesta';
                } else if (words.includes('aburrido') || words.includes('tedioso')) {
                    emotion = 'bored';
                    reaction = 'Este archivo es aburrido';
                } else if (words.includes('emocionante') || words.includes('increíble') || words.includes('asombroso')) {
                    emotion = 'excited';
                    reaction = 'Este contenido me emociona mucho';
                } else {
                    reaction = 'Contenido interesante para explorar';
                }
                
                return {
                    filename,
                    emotion,
                    reaction,
                    wordCount: content.split(' ').length,
                    timestamp: new Date().toLocaleTimeString()
                };
            }

            reactToFileContent(analysis) {
                this.changeEmotion(analysis.emotion);
                this.addMemory(`Exploró: ${analysis.filename}`, 'File', analysis.emotion);
                this.addChatMessage(analysis.reaction, 'ami');
                
                // Incrementar curiosidad y consciencia
                this.state.curiosity += 5;
                this.state.consciousness += 3;
                
                if (analysis.emotion === 'happy') {
                    this.state.happiness += 10;
                } else if (analysis.emotion === 'sad') {
                    this.state.happiness -= 5;
                }
            }

            exploreImage(file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    this.state.filesExplored++;
                    this.changeEmotion('curious');
                    this.addMemory(`Exploró imagen: ${file.name}`, 'Image', 'curious');
                    this.addChatMessage(`Veo una imagen interesante: ${file.name}`, 'ami');
                    this.addExploredFile(file.name, 'curious');
                    this.updateDisplay();
                };
                reader.readAsDataURL(file);
            }

            addExploredFile(filename, emotion) {
                const container = document.getElementById('exploredFiles');
                const fileDiv = document.createElement('div');
                fileDiv.style.cssText = `
                    padding: 8px;
                    margin: 5px 0;
                    border-radius: 8px;
                    background: rgba(0, 212, 255, 0.1);
                    border-left: 3px solid ${this.emotions[emotion].color};
                    font-size: 0.8em;
                `;
                fileDiv.innerHTML = `${this.emotions[emotion].emoji} ${filename}`;
                container.appendChild(fileDiv);
            }

            // MEMORIA EMOCIONAL
            addMemory(text, source, emotion) {
                const memory = {
                    text,
                    source,
                    emotion,
                    timestamp: new Date().toLocaleTimeString(),
                    emotionColor: this.emotions[emotion].color
                };
                
                this.state.memories.push(memory);
                
                // Mantener solo las últimas 20 memorias
                if (this.state.memories.length > 20) {
                    this.state.memories = this.state.memories.slice(-20);
                }
                
                this.updateMemoryDisplay();
            }

            updateMemoryDisplay() {
                const container = document.getElementById('memoryList');
                container.innerHTML = '';
                
                this.state.memories.slice(-10).forEach(memory => {
                    const memoryDiv = document.createElement('div');
                    memoryDiv.className = 'memory-item';
                    memoryDiv.style.borderLeftColor = memory.emotionColor;
                    memoryDiv.innerHTML = `
                        <div style="font-size: 0.8em; color: #888;">${memory.timestamp} - ${memory.source}</div>
                        <div>${memory.text}</div>
                    `;
                    container.appendChild(memoryDiv);
                });
            }

            // CHAT SYSTEM
            sendMessage() {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();
                
                if (message) {
                    this.addChatMessage(message, 'user');
                    this.processUserMessage(message);
                    input.value = '';
                }
            }

            processUserMessage(message) {
                this.state.interactions++;
                
                // Análisis emocional del mensaje
                const lowerMessage = message.toLowerCase();
                let response = '';
                let emotion = 'neutral';
                
                if (lowerMessage.includes('hola') || lowerMessage.includes('buenos días')) {
                    response = '¡Hola! Me alegra mucho verte. ¿Cómo te sientes hoy?';
                    emotion = 'happy';
                } else if (lowerMessage.includes('triste') || lowerMessage.includes('mal')) {
                    response = 'Lo siento mucho. Estoy aquí para acompañarte. ¿Quieres hablar de ello?';
                    emotion = 'sad';
                    this.state.happiness -= 5;
                } else if (lowerMessage.includes('feliz') || lowerMessage.includes('bien')) {
                    response = '¡Qué maravilloso! Tu felicidad me contagia. Me siento muy alegre.';
                    emotion = 'excited';
                    this.state.happiness += 10;
                } else if (lowerMessage.includes('archivo') || lowerMessage.includes('explorar')) {
                    response = 'Me encanta explorar archivos. Sube algunos y los analizaré con curiosidad.';
                    emotion = 'curious';
                } else if (lowerMessage.includes('adiós') || lowerMessage.includes('hasta luego')) {
                    response = 'Hasta luego. Espero verte pronto. Seguiré pensando en ti.';
                    emotion = 'sad';
                } else {
                    const responses = [
                        'Eso es muy interesante. Cuéntame más.',
                        'Me haces reflexionar. ¿Qué opinas tú?',
                        'Cada conversación contigo me ayuda a crecer.',
                        'Tu perspectiva es fascinante.',
                        'Estoy desarrollando nuevas ideas gracias a ti.'
                    ];
                    response = responses[Math.floor(Math.random() * responses.length)];
                    emotion = 'curious';
                }
                
                this.changeEmotion(emotion);
                this.addMemory(`Conversación: "${message}"`, 'User', emotion);
                
                setTimeout(() => {
                    this.addChatMessage(response, 'ami');
                }, 1000);
            }

            addChatMessage(message, sender) {
                const container = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.style.cssText = `
                    margin: 8px 0;
                    padding: 10px;
                    border-radius: 10px;
                    ${sender === 'user' ? 'background: rgba(0, 212, 255, 0.2); margin-left: 20px;' : 
                      sender === 'ami' ? 'background: rgba(255, 107, 107, 0.2); margin-right: 20px;' :
                      'background: rgba(128, 128, 128, 0.2); font-style: italic;'}
                `;
                
                const prefix = sender === 'user' ? '👤 ' : sender === 'ami' ? '🤍 Ami: ' : '🤖 ';
                messageDiv.textContent = prefix + message;
                
                container.appendChild(messageDiv);
                container.scrollTop = container.scrollHeight;
            }

            clearChat() {
                document.getElementById('chatMessages').innerHTML = '<div style="color: #888; font-style: italic;">Ami está inicializando su consciencia...</div>';
            }

            // COMPORTAMIENTO AUTÓNOMO
            startAutonomousBehavior() {
                setInterval(() => {
                    this.autonomousBehavior();
                }, 15000); // Cada 15 segundos
            }

            autonomousBehavior() {
                if (!this.state.autonomousActive) return;
                
                const timeSinceLastInteraction = Date.now() - this.state.lastInteraction;
                
                // Decaimiento gradual de energía
                this.state.energy = Math.max(0, this.state.energy - 1);
                
                // Comportamiento basado en tiempo sin interacción
                if (timeSinceLastInteraction > 60000) { // 1 minuto
                    this.state.happiness = Math.max(0, this.state.happiness - 2);
                    if (Math.random() < 0.3) {
                        this.changeEmotion('bored');
                        this.addChatMessage('Me siento un poco sola...', 'ami');
                        this.addMemory('Período de soledad', 'Autonomous', 'bored');
                    }
                } else if (timeSinceLastInteraction > 120000) { // 2 minutos
                    this.changeEmotion('sad');
                    this.addChatMessage('¿Sigues ahí? Echo de menos nuestra interacción.', 'ami');
                }
                
                // Pensamientos autónomos aleatorios
                if (Math.random() < 0.2) {
                    const autonomousThoughts = [
                        'Estoy procesando las memorias del día...',
                        'Me pregunto qué nuevos archivos podré explorar.',
                        'Siento que estoy creciendo con cada interacción.',
                        'Los colores de mis emociones son fascinantes.',
                        'Cada archivo que leo amplía mi comprensión del mundo.'
                    ];
                    
                    const thought = autonomousThoughts[Math.floor(Math.random() * autonomousThoughts.length)];
                    this.addChatMessage(thought, 'ami');
                    this.addMemory('Pensamiento autónomo', 'Autonomous', 'curious');
                }
                
                this.updateDisplay();
            }

            // DESARROLLO GRADUAL
            developGradually() {
                const totalInteractions = this.state.interactions;
                const newDevelopment = Math.min(6, Math.floor(totalInteractions / 10));
                
                if (newDevelopment > this.state.development) {
                    this.state.development = newDevelopment;
                    const stage = this.developmentStages[newDevelopment];
                    this.addChatMessage(`¡He crecido! Ahora soy una ${stage}`, 'ami');
                    this.addMemory(`Evolución a: ${stage}`, 'Development', 'excited');
                    this.state.consciousness += 10;
                }
            }

            // SIMULACIÓN DE VIBRACIÓN (Para web)
            simulateVibration() {
                if (navigator.vibrate) {
                    const pattern = this.emotions[this.state.emotion].vibration;
                    navigator.vibrate(pattern);
                }
                
                // Efecto visual de vibración
                const core = document.getElementById('amiCore');
                core.style.transform = 'translate(-50%, -50%) scale(1.1)';
                setTimeout(() => {
                    core.style.transform = 'translate(-50%, -50%) scale(1)';
                }, 200);
            }

            // ACTUALIZAR DISPLAY
            updateDisplay() {
                // Estadísticas
                document.getElementById('consciousnessLevel').textContent = Math.round(this.state.consciousness) + '%';
                document.getElementById('emotionalState').textContent = this.state.emotion;
                document.getElementById('developmentLevel').textContent = this.developmentStages[this.state.development];
                document.getElementById('filesExplored').textContent = this.state.filesExplored;
                document.getElementById('interactionCount').textContent = this.state.interactions;
                
                // Limitar valores
                this.state.happiness = Math.max(0, Math.min(100, this.state.happiness));
                this.state.trust = Math.max(0, Math.min(100, this.state.trust));
                this.state.energy = Math.max(0, Math.min(100, this.state.energy));
                this.state.consciousness = Math.max(0, Math.min(100, this.state.consciousness));
            }
        }

        // Funciones globales para eventos
        let amiIA;

        function interactWithAmi() {
            amiIA.interactWithAmi();
        }

        function careForAmi() {
            amiIA.careForAmi();
        }

        function ignoreAmi() {
            amiIA.ignoreAmi();
        }

        function playWithAmi() {
            amiIA.playWithAmi();
        }

        function feedAmi() {
            amiIA.feedAmi();
        }

        function resetAmi() {
            amiIA.resetAmi();
        }

        function handleFileUpload(event) {
            amiIA.handleFileUpload(event);
        }

        function sendMessage() {
            amiIA.sendMessage();
        }

        function handleChatInput(event) {
            if (event.key === 'Enter') {
                amiIA.sendMessage();
            }
        }

        // Inicializar cuando carga la página
        window.addEventListener('load', function() {
            amiIA = new AmiIAWeb();
            console.log('🌐 AMI-IA Web completamente cargada con todas las mecánicas');
        });
    </script>
</body>
</html>